<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="jakarta.faces.html"
  xmlns:f="jakarta.faces.core"
>
  <h:head>
    <title>Ajouter un Lieu - Indon√©sie</title>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts - Lobster -->
    <link
      href="https://fonts.googleapis.com/css2?family=Lobster&amp;display=swap"
      rel="stylesheet"
    />

    <style>
      body {
        font-family: "Lobster", cursive;
      }
      .indonesia-gradient {
        background: linear-gradient(
          180deg,
          #ff0000 0%,
          #ff0000 60%,
          #ffffff 40%,
          #ffffff 100%
        );
      }
    </style>
  </h:head>
  <h:body class="min-h-screen bg-gray-50">
    <!-- Header avec drapeau indon√©sien -->
    <div
      class="indonesia-gradient h-20 flex items-center justify-center shadow-md"
    >
      <div class="text-center">
        <h1 class="text-2xl font-bold text-white drop-shadow-lg">
          Gestion des Lieux
        </h1>
        <p class="text-gray-600 text-xs mt-1">D√©couvrez l'Indon√©sie</p>
      </div>
    </div>

    <!-- Conteneur principal avec deux colonnes -->
    <div class="container mx-auto px-4 py-6">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- Colonne gauche - Liste des lieux -->
        <div class="space-y-4">
          <div class="flex items-center mb-4">
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/9/9f/Flag_of_Indonesia.svg"
              alt="Drapeau Indon√©sie"
              class="w-8 h-6 mr-2 border border-gray-300 rounded"
            />
            <h2 class="text-xl font-semibold text-gray-800">Lieux ajout√©s</h2>
          </div>

          <!-- Liste des lieux avec DataTable -->
          <h:dataTable
            value="#{lieuBean.lieux}"
            var="lieu"
            class="w-full"
            rendered="#{not empty lieuBean.lieux}"
          >
            <h:column>
              <div
                class="bg-white rounded-lg shadow-md overflow-hidden mb-4 hover:shadow-lg transition"
              >
                <!-- Image par d√©faut locale -->
                <div class="relative h-48 overflow-hidden">
                  <img
                    src="#{request.contextPath}/images/indonesia.jpg"
                    alt="#{lieu.nom}"
                    class="w-full h-full object-cover"
                  />
                  <div
                    class="absolute top-2 right-2 bg-red-600 text-white text-xs px-2 py-1 rounded-full shadow-lg"
                  >
                    Indon√©sie
                  </div>
                </div>

                <div class="p-3">
                  <h3 class="font-semibold text-gray-800 text-base mb-1">
                    #{lieu.nom}
                  </h3>
                  <p class="text-gray-600 text-xs mb-2 line-clamp-2">
                    #{lieu.description}
                  </p>

                  <div
                    class="flex items-center text-xs text-gray-500 space-x-3"
                  >
                    <span>üìç #{lieu.latitude}, #{lieu.longitude}</span>
                  </div>
                </div>
              </div>
            </h:column>
          </h:dataTable>

          <!-- Message si aucun lieu -->
          <div
            class="bg-white rounded-lg shadow-md p-6 text-center text-gray-500"
            rendered="#{empty lieuBean.lieux}"
          >
            <p class="text-sm">Aucun lieu ajout√© pour le moment</p>
            <p class="text-xs mt-1">
              Utilisez le formulaire pour ajouter votre premier lieu üå¥
            </p>
          </div>
        </div>

        <!-- Colonne droite - Formulaire -->
        <div class="lg:sticky lg:top-6 h-fit">
          <div class="bg-white rounded-lg shadow-lg p-5 border border-red-600">
            <h2 class="text-lg font-semibold text-gray-800 mb-4">
              Ajouter un lieu
            </h2>

            <h:form class="space-y-4">
              <!-- Nom du lieu -->
              <div>
                <h:outputLabel
                  for="nom"
                  value="Nom du lieu"
                  class="block text-xs font-medium text-gray-700 mb-1"
                />
                <h:inputText
                  id="nom"
                  value="#{lieuBean.nom}"
                  required="true"
                  requiredMessage="Le nom est obligatoire"
                  class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent transition"
                  placeholder="Ex: Temple de Borobudur"
                />
                <h:message for="nom" class="text-red-600 text-xs mt-1" />
              </div>

              <!-- Description -->
              <div>
                <h:outputLabel
                  for="description"
                  value="Description"
                  class="block text-xs font-medium text-gray-700 mb-1"
                />
                <h:inputTextarea
                  id="description"
                  value="#{lieuBean.description}"
                  required="true"
                  requiredMessage="La description est obligatoire"
                  rows="3"
                  class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent transition resize-none"
                  placeholder="D√©crivez ce lieu..."
                />
                <h:message
                  for="description"
                  class="text-red-600 text-xs mt-1"
                />
              </div>

              <!-- Coordonn√©es GPS -->
              <div class="grid grid-cols-2 gap-3">
                <!-- Latitude -->
                <div>
                  <h:outputLabel
                    for="latitude"
                    value="Latitude"
                    class="block text-xs font-medium text-gray-700 mb-1"
                  />
                  <h:inputText
                    id="latitude"
                    value="#{lieuBean.latitude}"
                    required="true"
                    requiredMessage="La latitude est obligatoire"
                    class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent transition"
                    placeholder="-6.2088"
                  >
                    <f:convertNumber pattern="#0.0000" />
                  </h:inputText>
                  <h:message for="latitude" class="text-red-600 text-xs mt-1" />
                </div>

                <!-- Longitude -->
                <div>
                  <h:outputLabel
                    for="longitude"
                    value="Longitude"
                    class="block text-xs font-medium text-gray-700 mb-1"
                  />
                  <h:inputText
                    id="longitude"
                    value="#{lieuBean.longitude}"
                    required="true"
                    requiredMessage="La longitude est obligatoire"
                    class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent transition"
                    placeholder="106.8456"
                  >
                    <f:convertNumber pattern="#0.0000" />
                  </h:inputText>
                  <h:message
                    for="longitude"
                    class="text-red-600 text-xs mt-1"
                  />
                </div>
              </div>

              <!-- Boutons d'action -->
              <div class="flex gap-3 pt-2">
                <h:commandButton
                  value="Enregistrer"
                  action="#{lieuBean.enregistrer}"
                  class="flex-1 bg-red-600 hover:bg-red-700 text-white font-medium text-sm py-2 px-4 rounded-lg transition duration-200 shadow-md hover:shadow-lg"
                />

                <h:commandButton
                  value="Annuler"
                  action="#{navigationBean.voirAccueil}"
                  immediate="true"
                  class="flex-1 bg-white hover:bg-gray-100 text-gray-700 font-medium text-sm py-2 px-4 rounded-lg border-2 border-gray-300 transition duration-200"
                />
              </div>
            </h:form>
          </div>

          <!-- Info suppl√©mentaire -->
          <div class="mt-3 text-center text-gray-600 text-xs">
            <p>üå¥ Partagez vos lieux pr√©f√©r√©s üå¥</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Bouton retour -->
    <div class="mt-6 text-center">
      <h:form>
        <h:commandButton
          value="‚Üê Retour √† l'accueil"
          action="#{navigationController.voirAccueil()}"
          class="bg-red-600 hover:bg-red-700 text-white font-medium text-sm py-2 px-6 rounded-lg transition duration-200 shadow-md hover:shadow-lg"
        />
      </h:form>
    </div>
  </h:body>
</html>
